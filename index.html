<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <meta name="description" content="doTRoute.js : A simple, flexible javascript framwork using jQuery, doT.js, and a custom router.">

        <title>doTRoute.js</title>

        <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css"/>
        <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/jquery.snippet.css"/>

        <script src="javascripts/jquery.js"></script>
        <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
        <script src="javascripts/jquery.snippet.js"></script>
        <script src="javascripts/doT.js"></script>
        <script src="javascripts/doTRoute.js"></script>
        <script>

// Now normally you'd put this in a separate files or several (I've been 
// doing one per controller, with all the templates and routes contained)
// but I figured it'd be nice to view source and see everything.

GitHubIO = new DoTRoute.Application();

GitHubIO.controller("Tutorial",null,{
    source: function() {
        $("#example",$('#output')[0].contentWindow.document).text(this.it.source);
    },
    home: function() {
        this.it = {
            source: $.ajax({url: "javascripts/usage.js", async: false}).responseText,
            links: JSON.parse($.ajax({url: "javascripts/usage.json", async: false}).responseText)
        };
        this.application.render(this.it);
        $("#source").snippet("javascript",{style:"vim"});
        $('#output').load($.proxy(this.source,this));

    }
});

// Setup a header and footer to use everywhere

GitHubIO.partial("Header",$.ajax({url: "header.html", async: false}).responseText);
GitHubIO.partial("Footer",$.ajax({url: "footer.html", async: false}).responseText);

// Set up the home page

GitHubIO.template("Home",$.ajax({url: "home.html", async: false}).responseText,null,GitHubIO.partials);

GitHubIO.route("home","/","Home","Tutorial","home");

        </script>
    </head>
    <body>
    </body>
</html>
